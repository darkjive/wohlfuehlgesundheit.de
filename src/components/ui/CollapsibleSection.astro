---
// CollapsibleSection.astro - Collapsible section for optional form fields
// Similar to FAQs, but for form sections
import { Icon } from 'astro-icon/components';

interface Props {
  title: string;
  subtitle?: string;
  isOptional?: boolean;
}

const { title, subtitle, isOptional = true } = Astro.props;
---

<details class="collapsible-section group mb-6 rounded-lg border border-gray-300 transition-all dark:border-gray-600">
  <summary
    class="dark:hover:bg-dark dark:group-open:bg-dark flex cursor-pointer items-center justify-between rounded-lg px-6 py-4 text-lg font-semibold text-gray-400 transition-colors hover:bg-gray-50 group-open:bg-gray-50 group-open:text-gray-900 dark:text-gray-400 dark:group-open:text-gray-100"
  >
    <div class="flex items-center gap-3">
      <span class="section-title">{title}</span>
      {isOptional && <span class="text-base font-normal text-gray-300 dark:text-gray-500">(Optional)</span>}
    </div>
    <Icon
      name="tabler:chevron-down"
      class="h-5 w-5 flex-shrink-0 text-gray-400 transition-transform duration-200 group-open:rotate-180 group-open:text-gray-900 dark:text-gray-400 dark:group-open:text-gray-100"
    />
  </summary>

  <div class="px-6 pb-6 pt-2">
    {subtitle && <p class="mb-4 text-base text-gray-600 dark:text-gray-400">{subtitle}</p>}
    <slot />
  </div>
</details>

<style>
  /* Remove default marker */
  summary {
    list-style: none;
  }
  summary::-webkit-details-marker {
    display: none;
  }
</style>
