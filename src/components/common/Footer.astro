---
import { Icon } from 'astro-icon/components';
// import { SITE } from 'astrowind:config';
// import { getHomePermalink } from '~/utils/permalinks';

interface Link {
  text?: string;
  href?: string;
  ariaLabel?: string;
  icon?: string;
}

export interface Props {
  secondaryLinks: Array<Link>;
  socialLinks: Array<Link>;
  footNote?: string;
  theme?: string;
}

const { socialLinks = [], footNote = '', theme = 'light' } = Astro.props;

const buildTime = import.meta.env.BUILD_TIME || '';
const formattedBuildTime = buildTime ? new Date(buildTime).toLocaleString('de-DE', {
  year: 'numeric',
  month: '2-digit',
  day: '2-digit',
  hour: '2-digit',
  minute: '2-digit'
}) : '';
---

<footer class:list={[{ dark: theme === 'dark' }, 'not-prose relative']}>
  <div class="dark:bg-dark pointer-events-none absolute inset-0 dark:bg-none" aria-hidden="true"></div>
  <div class="relative mx-auto max-w-5xl px-4 sm:px-6">
    <div class="py-4 pt-0 text-center md:py-8">
      {
        socialLinks.length > 0 &&
          socialLinks.map(({ ariaLabel, href, text, icon }) => (
            <a
              class="inline-block rounded-lg p-5 text-primary hover:text-black focus:outline-none focus:ring-1 focus:ring-gray-200 dark:text-secondary dark:focus:ring-gray-700"
              aria-label={ariaLabel}
              href={href}
            >
              {icon && <Icon name={icon} class="inline-block h-7 w-7" />}
              <br />
              <Fragment set:html={text} />
            </a>
          ))
      }
    </div>
    <div class="border-t py-6 dark:border-none md:py-8">
      <div class="text-center text-xs uppercase tracking-wider dark:text-muted sm:tracking-widest md:text-sm">
        <Fragment set:html={footNote} />
      </div>
      {formattedBuildTime && (
        <div class="mt-2 text-center text-[0.625rem] text-gray-400 dark:text-gray-600 opacity-50" title={`Build: ${buildTime}`}>
          {formattedBuildTime}
        </div>
      )}
    </div>
  </div>
</footer>
